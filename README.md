# Administracao-de-Sistemas
This repository contains shell scripts that facilitate the configuration and management of essential services such as DNS, SAMBA, VirtualHosts, NFS, backups, RAID, fail2ban, and PortKnocking. These scripts were created for the work of the Systems Administration UC.

## Setup.sh

The setup.sh script is an automated setup tool designed to configure and prepare a Linux server. It disables the firewalld service and SELinux to avoid conflicts with manual firewall configurations, installs a set of essential system and networking packages, and enables several important services. Among the installed packages are net-tools, epel-release, httpd, bind, rpcbind, samba, nfs-utils, rsync, tar, mdadm, iptables-services, fail2ban, and knockd. Once the packages are installed, the script activates and enables services such as iptables, httpd, named, smb, nmb, nfs-server, rsyncd, fail2ban, knockd, and rpcbind so they start automatically on system boot. It then clears any existing firewall rules and configures iptables to allow established and related connections, loopback traffic, ICMP (ping), and access to key ports such as SSH (22), HTTP (80), DNS (53), and NFS-related ports (111, 2049, and 20048). All other incoming traffic is rejected by default, and the rules are saved for persistence. At the end of the process, the script asks the user whether to reboot the system immediately to apply all the changes, or to restart later manually. 
NOTE: Root privileges are required to run the script successfully.

## Menu.sh

The menu.sh script serves as the central control interface for the entire project, providing a unified and interactive way to access all administrative scripts developed throughout the system. It presents a simple text-based menu that lists each functional area of the project, corresponding to the different “Pontos” (tasks) implemented, such as server setup, Samba configuration, NFS management, backups, RAID creation, Fail2Ban, and Port Knocking. Based on the user’s selection, the script automatically sets the appropriate permissions (chmod +x) for the chosen script and executes it. This structure allows administrators to manage all major system services and configurations from a single entry point without needing to remember or manually execute individual script names. Each option in the menu triggers the execution of its associated Bash script — for example, point 2 for Samba management, point 7 for NFS, point 9 for backups, point 10 for RAID setup, and so on. The script includes input validation, a clear navigation structure, and a simple mechanism to return to the main menu after completing any task. Overall, menu.sh provides an efficient and user-friendly way to centralize system administration operations into one cohesive interface.

## Ponto1.sh

The ponto1.sh script is an interactive Bash tool that automates the management of DNS zones and corresponding Apache VirtualHosts. It allows the user to create, modify, list, and remove DNS zones and their associated web directories through a simple menu-driven interface. When creating a new master zone, the script automatically updates the named.conf file to allow external queries, generates the appropriate DNS zone file, and sets up a corresponding VirtualHost in Apache with a default welcome page stored under /dominios/<domain>. It ensures that the necessary services such as named and httpd are restarted to apply all changes. The script also provides options to add or update DNS A and MX records interactively, allowing multiple entries per domain, and it can generate reverse zones automatically based on the IP addresses present in the forward zone files. Additionally, the user can delete a domain, which removes all related DNS entries, reverse zones, Apache VirtualHost configurations, and the corresponding directory. A listing function is also available to display all currently defined zones. Overall, this script provides a straightforward way to configure and manage DNS and web hosting services without manually editing configuration files.

## Ponto2.sh

The ponto2.sh script is an interactive Bash utility that simplifies the management of Samba file shares on a Linux server. It allows the system administrator to create, modify, deactivate, delete, and list Samba shares through an easy-to-use text menu. When creating a new share, the script prompts the user for the share name, directory path, and username, automatically validating input and ensuring that the user exists in the system and in Samba. If the user does not exist, it is created with the same password as the username. The script then creates the corresponding directory, assigns appropriate permissions, updates the Samba configuration file (/etc/samba/smb.conf), and restarts the Samba services (smb and nmb) to apply changes. It also keeps track of the created shares in the auxiliary file /etc/samba/.usersamba. Other functions allow administrators to remove shares completely, rename them, change their paths, or temporarily disable them by marking them as unavailable in the configuration. The script also includes a feature to mount remote Windows shares locally using the CIFS protocol, requesting user credentials securely. Finally, it provides an option to list all currently active shares defined in the Samba configuration. Overall, ponto2.sh offers a practical and interactive way to manage local and remote file sharing through Samba without manually editing configuration files.

## Ponto7.sh

The ponto7.sh script is an interactive Bash tool that automates the management of NFS (Network File System) shares on a Linux server. It provides a menu-driven interface that allows the system administrator to create, modify, disable, enable, and delete NFS shares without directly editing the /etc/exports configuration file. When creating a new share, the script asks for the directory path and the network IP range allowed to access it, validates the input, creates the directory if it does not exist, sets proper permissions, and appends the corresponding configuration entry to /etc/exports. It then restarts the NFS service to apply the changes. The script also includes functions to remove existing shares, with safety checks to confirm deletion if the directory is not empty, and to modify existing shares by changing their paths or associated IP ranges. Administrators can also temporarily disable a share by commenting it out in the exports file, or re-enable it later by uncommenting the corresponding line. Each action automatically restarts the NFS server to ensure changes take effect immediately. Overall, ponto7.sh offers a convenient and safe way to configure and maintain NFS shares through an interactive terminal interface.

## Ponto7_cliente.sh

The ponto7_cliente.sh script is an automated Bash utility designed to configure an NFS client and mount remote NFS shares from a server. It first checks whether the required packages nfs-utils and rpcbind are installed, installing them automatically if necessary. It then enables and starts the corresponding services to ensure the system can communicate with NFS servers. The script interactively asks the user for the server’s IP address, the remote share path (for example /script), and the local mount point (such as /mnt/nfs), validating the input for correctness. It creates the local mount directory if it does not exist, and then mounts the specified NFS share using the mount -t nfs command. After the mount operation, it verifies whether the process succeeded and provides clear feedback. Optionally, the user can choose to make the mount persistent by adding an entry to /etc/fstab, ensuring that the share will be automatically mounted at boot. Overall, ponto7_cliente.sh provides a quick and reliable way to connect a client machine to an NFS server without requiring manual configuration or editing system files.

## Ponto9.sh

The ponto9.sh script is a Bash-based backup management tool that automates both system and user data backups. It offers an interactive menu to perform different types of backups and also supports automated scheduling via cron. The system backup function creates a compressed archive of critical configuration files such as /etc/passwd, /etc/shadow, /etc/group, and /etc/gshadow, storing them under /backups/sistema with a timestamped filename. The user backup function creates incremental backups of all user home directories (/home) under /backups/users, using rsync with the --link-dest option to save space by linking unchanged files from previous backups. If executed with the argument auto-user-backup, the script performs the user backup automatically without prompting. It also checks whether a cron job exists, and if not, it schedules a daily incremental user backup at 08:30 AM, redirecting output to a log file at /var/log/backup_users.log. Through its interactive menu, the user can choose to back up the system, user directories, or both, ensuring an efficient and flexible backup routine. Overall, ponto9.sh provides a reliable and space-efficient way to maintain regular backups of essential system and user data.

## Ponto10.sh

The ponto10.sh script automates the creation and configuration of a RAID 5 array using the mdadm utility. It builds a new RAID device named /dev/md0 with three disks (/dev/sdb, /dev/sdc, and /dev/sdd) and formats it with the ext4 filesystem. After formatting, it creates a mount point at /ponto10_raid and mounts the RAID array there, making it immediately accessible. The script also saves the RAID configuration by appending the output of mdadm --detail --scan to /etc/mdadm.conf, ensuring the array is recognized after reboot. Additionally, it checks whether the RAID device is already listed in /etc/fstab, and if not, adds an entry to automatically mount it at boot using the systemd.automount option. Once completed, the RAID 5 array is fully set up and ready for use, providing both redundancy and improved read performance.

## Ponto11.sh

The ponto11.sh script is an interactive Bash utility that configures and manages the Fail2Ban service to protect the SSH server against brute-force attacks. It provides a simple text-based menu that allows administrators to enable Fail2Ban for SSH, view banned IP addresses, manually ban specific IPs, or unban previously blocked ones. When configuring Fail2Ban, the script automatically creates or replaces the /etc/fail2ban/jail.local configuration file with parameters optimized for security, including a maximum of three failed login attempts (maxretry = 3), a ban time of one hour (bantime = 3600 seconds), and a monitoring window of ten minutes (findtime = 600). The chosen action is iptables-multiport, which blocks offending IPs through the system firewall. Once configured, the script restarts the Fail2Ban service to apply the new rules. Administrators can use the menu options to display the current list of banned IPs, manually block an IP for testing or security purposes, or remove an IP from the banned list if necessary. Overall, ponto11.sh provides an efficient and user-friendly way to configure and control SSH protection using Fail2Ban directly from the terminal.

## Ponto12.sh

The ponto12.sh script is an interactive Bash tool that automates the configuration and management of Port Knocking to secure SSH access. Port Knocking is a network security technique that keeps a port (in this case, port 22 for SSH) closed until a specific sequence of connection attempts is made to predefined ports, effectively hiding SSH from unauthorized users. The script prompts the administrator to define the number of ports and their specific sequence, validating each input and generating both an opening and closing sequence. It then writes the configuration to /etc/knockd.conf and ensures that the correct iptables rules are applied — blocking SSH access by default and allowing it only when the correct knocking sequence is received. It also inserts a DROP rule for SSH traffic to enforce the lock until the sequence is triggered. Through a simple text-based menu, administrators can activate or deactivate Port Knocking at any time, with automatic restarts of the knockd and iptables services to apply changes immediately. Once activated, the script displays the configured open and close sequences, making it easy to use. Overall, ponto12.sh provides an effective and automated way to implement Port Knocking for SSH protection, enhancing the system’s security posture against unauthorized access attempts.

## Ponto12_cliente.sh

The ponto12_cliente.sh script is a client-side Bash utility designed to interact with a server protected by Port Knocking, enabling secure SSH access only after the correct sequence of ports is contacted. The script begins by ensuring that the knock command-line tool is installed, automatically installing it through the package manager if necessary. It then prompts the user for the target server’s IP address and validates the input format. After that, the user specifies the number of ports in the knocking sequence and provides each port number, which the script validates individually. Once all ports are entered, the script sends the knocking sequence to the server using the knock command. This triggers the server’s knockd service to temporarily open port 22 for SSH connections. Immediately afterward, the script attempts to establish an SSH session with the server as the root user. In essence, ponto12_cliente.sh provides a simple and secure way for administrators to connect to servers protected by Port Knocking, automating the entire process from sequence entry to SSH connection.
